# 스코프

## var - 함수 레벨 스코프
> 자바는 모든 코드 블록을 지역 스코프로 인정하는 `블록 레벨 스코프`를 가진다. 

자바스크립트에서 __var 키워드로 선언된 변수는 `함수 레벨 스코프`를 가진다.__

모든 코드 블록(if,for,while,try/catch 등)이 아닌 __오로지 함수 블록(함수 몸체)만을 지역 스코프로 인정__ 한다.

```js
var x = 1;

function test() {
  var x = 4;
  console.log(x);
}

test(); // 4
console.log(x); // 1

if (true) {
  var x = 2;
}

console.log(x); // 2
```

함수 test() 안에서 선언된 x는 지역 스코프 내에서 선언된 지역 변수로서 test() 안에서만 유효하다.

반면, if문 안에서 선언된 x는 전역 변수로서 x의 중복 선언이 수행되며 x의 값이 2로 바뀌게 된다.

```js
var i = 100;
for(var i = 1; i<= 5; i++) {
  console.log(i); // 1 2 3 4 5 순서대로 출력 
}

console.log(i); // 5
```

for문 안에서 선언된 i 역시 전역 변수로서 중복 선언이 수행된다.


> ES6에서 도입된 let, const 키워드는 블록 레벨 스코프를 지원한다.

## 함수 - 렉시컬 스코프

렉시컬 스코프에서는 __함수 정의가 평가되는 시점에 해당 함수의 상위 스코프가 정적으로 결정__ 된다.

```js
var x = 4;

function test() {
  var x = 10;
  inner();
}

function inner() {
  console.log(x);
}

test(); // ①
inner(); // ②
```

② 의 실행결과가 `4`라는 것은 쉽게 유추할 수 있다.
그러나 ①의 실행결과는 inner 함수의 상위 스코프가 무엇인지 어떻게 결정하느냐에 따라 그 예측 값이 달라진다.

1. 함수를 어디서 호출했는지에 따라 해당 함수의 상위 스코프가 결정된다.
2. 함수를 어디서 정의했는지에 따라 해당 함수의 상위 스코프가 결정된다.

1번을 따를 경우 ①의 실행결과는 `10`, 2번을 따를 경우 `4`가 될 것이다.

그리고 위 코드를 자바스크립트에서 실행한 결과는 `4`, 즉 자바스크립트는 렉시컬 스코프를 따른다.

자바스크립트는 렉시컬 스코프를 따른다. 따라서 함수 객체는 함수 정의가 평가되는 시점에 결정된 상위 스코프를 계속해서 기억한다.
